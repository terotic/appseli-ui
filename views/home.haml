!!! 5
%html#ng-app{"ng-app": "apps"}
  %head
    %meta{charset: "utf-8"}
    %meta{content: "IE=edge,chrome=1", "http-equiv": "X-UA-Compatible"}
    %meta{content: "initial-scale=1", name: "viewport"}
    %title apps.hel.fi

    %link{rel: "apple-touch-icon", sizes: "57x57", href: "/apple-touch-icon-57x57.png"}
    %link{rel: "apple-touch-icon", sizes: "114x114", href: "/apple-touch-icon-114x114.png"}
    %link{rel: "apple-touch-icon", sizes: "72x72", href: "/apple-touch-icon-72x72.png"}
    %link{rel: "apple-touch-icon", sizes: "144x144", href: "/apple-touch-icon-144x144.png"}
    %link{rel: "apple-touch-icon", sizes: "60x60", href: "/apple-touch-icon-60x60.png"}
    %link{rel: "apple-touch-icon", sizes: "120x120", href: "/apple-touch-icon-120x120.png"}
    %link{rel: "apple-touch-icon", sizes: "76x76", href: "/apple-touch-icon-76x76.png"}
    %link{rel: "apple-touch-icon", sizes: "152x152", href: "/apple-touch-icon-152x152.png"}
    %meta{name: "apple-mobile-web-app-title", content: "hel.apps"}
    %link{rel: "icon", type: "image/png", href: "/favicon-196x196.png", sizes: "196x196"}
    %link{rel: "icon", type: "image/png", href: "/favicon-160x160.png", sizes: "160x160"}
    %link{rel: "icon", type: "image/png", href: "/favicon-96x96.png", sizes: "96x96"}
    %link{rel: "icon", type: "image/png", href: "/favicon-16x16.png", sizes: "16x16"}
    %link{rel: "icon", type: "image/png", href: "/favicon-32x32.png", sizes: "32x32"}
    %meta{name: "msapplication-TileColor", content: "#2b5797"}
    %meta{name: "msapplication-TileImage", content: "/mstile-144x144.png"}
    %meta{name: "application-name", content: "hel.apps"}

    %script{type: "text/javascript"}
      != "app_settings = " + config_json + ";"

    %link{href: config.static_path + "css/appseli.css", media: "all", rel: "stylesheet", type: "text/css"}
    %link{href: "http://fonts.googleapis.com/css?family=Karla:400,400italic,700,700italic", media: "all", rel: "stylesheet", type: "text/css"}

    %base{href: "/"}
  %body
    .g-main-wrapper
      .g-navigation
        %nav.navigation-bar.navbar-custom
          / role=navigation
          .container-fluid
            / Brand and toggle get grouped for better mobile display
            .navbar-header
              %button.navbar-toggle{"data-target": "#bs-example-navbar-collapse-1", "data-toggle": "collapse", type: "button"}
                %span.sr-only
                  Toggle navigation
                %span.icon-bar
                %span.icon-bar
                %span.icon-bar
              %a.navbar-brand{href: "/index/"}
                apps.hel.fi
            / Collect the nav links, forms, and other content for toggling
            #bs-example-navbar-collapse-1.collapse.navbar-collapse
              %ul#j-pagenavi.nav.navbar-nav
                %li
                  %a{href: "/list/"} Applications
                %li
                  %a{href: "/categories/"} Categories
                %li
                  %a{href: "/info/"} Info
              %ul.nav.navbar-nav.navbar-right
                %form.navbar-form.navbar-left{role: "search"}
                  .form-group
                    %input.form-control.search-query{type:"text", placeholder:"Search"}
                    %button.btn.btn-default{type:"submit"}
                      %span.glyphicon.glyphicon-search
      .g-splash-screen
        .splash-content{"ng-cloak": true}
          .loader
          loading
      .g-content{"ng-view": "1", "ng-class": "pageState.state"}
    .g-footer
      %footer.main-footer
        .main-footer-content
          %p Information provided by Helsingin kaupunki
          %p 2014
          %p Send feedback
    %script{src: "https://ajax.googleapis.com/ajax/libs/angularjs/1.2.11/angular.js", type: "text/javascript"}
    %script{src: "https://ajax.googleapis.com/ajax/libs/angularjs/1.2.11/angular-resource.js", type: "text/javascript"}
    %script{src: "https://ajax.googleapis.com/ajax/libs/angularjs/1.2.11/angular-route.min.js", type: "text/javascript"}
    %script{src: "https://ajax.googleapis.com/ajax/libs/angularjs/1.2.11/angular-animate.js", type: "text/javascript"}
    %script{src: "https://ajax.googleapis.com/ajax/libs/angularjs/1.2.11/angular-touch.js", type: "text/javascript"}
    %script{src: "https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js", type: "text/javascript"}
    %script{src: "https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js", type: "text/javascript"}
    
    %script{src: "vendor/ui-bootstrap-custom-0.10.0.min.js", type: "text/javascript"}
    :javascript
      angular.module("config", [])
      .constant("API_ROOT", app_settings.api_backend_url + '/')
      .constant("STATIC_URL", app_settings.static_path);
      window.HAML = {}
    %script{src: "templates.js", type: "text/javascript"}
    %script{src: "js/app.js", type: "text/javascript"}
    - if (config.livereload)
      %script{src: "//localhost:35729/livereload.js"}
